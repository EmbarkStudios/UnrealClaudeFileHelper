# Generated by unreal-index setup. Re-run 'npm run setup' to regenerate.
services:
  discovery:
    build: .
    image: unreal-index:latest
    container_name: unreal-index-discovery
    ports:
      - "3847:3847"
    volumes:
      - discovery-db:/data/db
      - discovery-mirror:/data/mirror
      - discovery-zoekt:/data/zoekt-index
      - ./workspaces.json:/app/workspaces.json:ro
      - ./workspace-configs/discovery.json:/app/config.json:ro
    mem_limit: 8g
    memswap_limit: 10g
    restart: unless-stopped
    stop_grace_period: 15s

  editormain:
    build: .
    image: unreal-index:latest
    container_name: unreal-index-editormain
    ports:
      - "3848:3847"
    volumes:
      - pioneer-db:/data/db
      - pioneer-mirror:/data/mirror
      - pioneer-zoekt:/data/zoekt-index
      - ./workspaces.json:/app/workspaces.json:ro
      - ./workspace-configs/editormain.json:/app/config.json:ro
    mem_limit: 8g
    memswap_limit: 10g
    restart: unless-stopped
    stop_grace_period: 15s

volumes:
  discovery-db:
  discovery-mirror:
  discovery-zoekt:
  pioneer-db:
  pioneer-mirror:
  pioneer-zoekt:
